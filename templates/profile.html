{% extends 'body.html' %}

{% block head %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/profile/profile.css' %}">
{% endblock %}

{% block content %}
    <div class="profile-container">
        <h2>User Profile</h2>
        <p><strong>Name:</strong> {{ user.first_name }} {{ user.last_name }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>

        <!-- Add Movie buttons for authors and admins -->
        {% if user.is_authenticated %}
            {% if user.is_author or user.is_superuser %}
                <div class="add-buttons">
                    <a href="{% url 'profile/add_movie' %}" class="add-btn">Add Movie</a>
                </div>
            {% endif %}

            <!-- Change Permission button -->
            {% if user.is_superuser %}
                <div class="permission-buttons">
                    <a href="{% url 'change_permission' %}" class="change-permission-btn">Change Permission</a>
                </div>
            {% endif %}
        {% endif %}

        <!-- Change User Status Section -->
        {% if user.is_superuser %}
            <h3>Change User Status</h3>
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="confirm-btn">Confirm</button>
            </form>

            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                        <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endif %}
    </div>
{% endblock %}
